all:
	@docker compose -f ./srcs/docker-compose.yml up -d --build


down:
	@docker compose -f ./srcs/docker-compose.yml down


rm_volume: down
	@docker volume rm srcs_wordpress
	@docker volume rm srcs_mariadb


rm_image: down
	@docker image rm nginx:42 -f
	@docker image rm wordpress:42 -f
	@docker image rm mariadb:42 -f


clean: down rm_volume rm_image
	@docker builder prune -f
	@docker system prune -a
	@docker volume prune -f
	@sudo rm -rf ./srcs/requirements/mariadb/data/*
	@sudo rm -rf ./srcs/requirements/wordpress/web/*


re: clean all

ps: 
	@docker compose -f ./srcs/docker-compose.yml ps

.PHONY: all re down clean





#docker stack deploy -c docker-compose.yml my-nginx-stack

#docker-compose up -d -->
:x
